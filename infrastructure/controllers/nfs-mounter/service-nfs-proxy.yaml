---
apiVersion: v1
kind: Service
metadata:
  name: nfs-server
  namespace: nfs-mounter
  annotations:
    io.cilium/lb-ipam-ips: "172.21.0.11"
spec:
  type: LoadBalancer
  ports:
    - name: nfs
      port: 2049
      protocol: TCP
      targetPort: 2049
    - name: rpcbind
      port: 111
      protocol: TCP
      targetPort: 111
    - name: mountd
      port: 20048
      protocol: TCP
      targetPort: 20048
---
apiVersion: v1
kind: Endpoints
metadata:
  name: nfs-server
  namespace: nfs-mounter
subsets:
  - addresses:
      - ip: 172.20.1.10
    ports:
      - name: nfs
        port: 2049
        protocol: TCP
      - name: rpcbind
        port: 111
        protocol: TCP
      - name: mountd
        port: 20048
        protocol: TCP
